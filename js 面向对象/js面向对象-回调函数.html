<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>js面向对象- 回调函数</title>
</head>
<body>
    
</body>
<script>
/*输入的数先乘2再加上1*/
function multiplyByTwo(a,b,c){
    var i,ar=[];
    for(var i = 0;i<3;i++){
        ar[i] = arguments[i] * 2;
    }
    return ar;
}

function addOne(a){
    return a + 1;
}

var x= multiplyByTwo(2,5,8);
console.log(x);//[4,10,16]

 var y = addOne(105);
console.log(y);//106


/*接下来实现三个元素在两个函数之间传递*/

//定义一个用于存储元素的数组
var myarr = [];
myarr = multiplyByTwo(10,20,30);//20,40,60
//遍历每个元素，并将他们传递给addOne()
for(var i=0;i<3;i++){
    myarr[i]=addOne(myarr[i]);
}
console.log(myarr);//21,41,61

/*以上方法，开销大,用了两个循环 我们需要将他们合二为一*/

/*multiplyByTwo函数做点改动,接受个回调函数，
在每次迭代操作时调用它
*/
function multiplyByTwoCallBack(a,b,c,callback){
    var i,ar=[];
    for(i=0;i<3;i++){
        ar[i]=callback(arguments[i]*2);
    }
    return ar;
}

var w = multiplyByTwoCallBack(11,22,33,addOne);
console.log(w);//[21,45,67]

//匿名函数在回掉方面的应用：
//匿名函数替代addOne
var w2 = multiplyByTwoCallBack(1,2,3, function(q){return q + 1});
console.log(w2);//3,5,7


//组合型的应用示例
var a = function(){
    //私有函数
    function someSetup(){
        var setup = 'done';
        console.log(setup);
    }
    //私有函数
    function actualWork(){
        alert('work-worky');
    }
    someSetup();
    return actualWork;
}();//自调函数
a();//再次调用时会alert


//词法作用域
function f1(){
    var abc = 1;
    f2();
}
function f2(){
    console.log(abc);
}
var  abc =3;
f1();//abc is not defined 
//f1(), f2()不存在共享的词法作用域


/*定义和使用checking对象*/
/*function Checking(amount) { 
    this.balance = amount;//属性
    this.deposit = deposit;//方法 收入
    this.withdraw = withdraw; //方法 计算余额
    this.toString = toString;//方法 
}
function deposit(amount) { 
    this.balance += amount;
}
function withdraw(amount) {
    if (amount <= this.balance) { 
        this.balance -= amount;
    }
    if (amount > this.balance) {
        console.log("Insufficient funds");
    }
}
function toString() {
    return "Balance: " + this.balance;
}
var account = new Checking(500); 
account.deposit(1000);*/
//console.log(account.toString());
//Balance: 1500 account.withdraw(750); print(account.toString()); 
// 余额：750 account.withdraw(800);
// 显示余额不足print(account.toString());
// 余额：750


function curve(grade) {
    return grade += 5;
}
var grades = [77, 65, 81, 92, 83];
var newgrades = grades.map(curve); 
console.log(newgrades); // 82, 70, 86, 97, 88


</script>
</html>